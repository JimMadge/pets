---

- name: Pets
  hosts: all
  become: yes

  vars_files:
    - vars/arch.yaml
    - vars/packages.yaml
    - vars/user.yaml

  collections:
    - kewlftt.aur

  tasks:
    - name: Install common packages
      ansible.builtin.import_tasks: tasks/common_packages.yaml
      tags: packages

    - name: Configure user
      ansible.builtin.import_tasks: tasks/user.yaml
      tags: user

    - name: Configure Arch
      ansible.builtin.import_tasks: tasks/arch_configuration.yaml
      when: ansible_facts['distribution'] == "Archlinux"
      tags: arch
